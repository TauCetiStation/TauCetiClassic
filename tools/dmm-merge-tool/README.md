# JTGMerge

**JTGMerge** развитие оригинального [JMerge](https://github.com/Baystation12/JMerge), добавляющее ряд фич и поддержку TGM формата.

## Что это такое

В контексте репозитория JTGMerge выполняет две задачи: 
1) чистка изменений на карте, сделанных в DreamEditor, с сопутствующей конвертацией в формат, более удобоваримый для гита;
2) мерж карт, с возможностью разрешать конфликты в интерактивном режиме. 
Сам по себе JTGMerge предоставляет cli-интерфейс для взаимодействия, поэтому с ним можно работать как с отдельным приложением.

## Установка

Для работы требуется **установленная Java 8 или выше**. Чтобы проверить её наличие, необходимо ввести в консоль `java -version`. Если не получите в консоли нечто такое (смотреть ниже), значит придётся ставить. https://java.com/ru/download/

Цифры могут отличаться:
```
java version "1.8.0_181"
Java(TM) SE Runtime Environment (build 1.8.0_181-b13)
Java HotSpot(TM) 64-Bit Server VM (build 25.181-b13, mixed mode)
```

## Как использовать

Говоря об использовании, подразумевается чистка карты после изменений в DreamEditor. Для неё есть два варианта: ручной и автоматизированный. 

Интерактивное разрешение мерж конфликтов появится автоматически после действий, описанных в автоматизированном варианте использования.

### Ручной

1) Перед тем как изменять карту запустите `1_prepare_maps.bat`. Данный скрипт создаст локальные бэкапы карт, которые будут использованы для чистки изменений сделанных в DreamEditor.
2) После того как вы изменили карту в DreamEditor, до того как делать коммит, запустите `2_clean_maps.bat`. Во время работы скрипта вам будет дан выбор, какую карту нужно обработать.
3) (Опционально) Запустите `3_delete_backups.bat`. Этот скрипт удалит все локальные бэкапы.

### Автоматизированный

**Данные шаги нужно сделать лишь один раз**.

1) Зайдите в папку [~/tools/_git-hooks](../_git-hooks).
2) Прочитайте `README` и запустите `install.bat`, если у вас Windows или `instal.sh` если что-то другое. Данный скрипт установит вам в репозиторий все доступные мерж драйверы и гит хуки.

После этого больше ничего делать не нужно. Карты будут автоматически чиститься, когда вы сделаете коммит, а о работе мерж драйвера вы узнаете только в случае возникновения прямого конфликта (когда кто-то изменил тот же тайл, что и вы). Следовательно, всё что было описано про ручное использование JTGMerge вам не понадобится.

<hr>

Source Code: https://github.com/SpaiR/JTGMerge
